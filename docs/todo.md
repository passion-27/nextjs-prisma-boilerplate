# Todo

## Todo

- logging
- tests, next examples
- ci cd, deploy
- readme
- tailwind and root font-size 10px 1rem, global and component styles
- react query, redux toolkit, redux toolkit query
- redux toolkit vercel example
- update readme before forget...
- try catch to prisma calls getServerSideProps...
- semantic html
- Next.js Image config
- post - hero image, tag, category
- comments model
- drafts count in session or user state
- typescript silent errors...
- on change tw-base.scss must restart, no intelisense for my utilities
- docker express maybe, github actions, remote containers
- add prisma migration container, move prisma to devDependencies
- next.js multiple build contexts, next.js app, server.ts and seed.js
- heroku docker
- update traefik-proxy readme
- me query, only userId and email in session
- throw 404 from zod api...
- handle errors in getServerSideProps
- edit user, delete user - admin
- validate ids in api zod
- test `await queryClient.prefetchQuery([QueryKeys.POSTS_PROFILE, profile.username, 1]...`
- reusable guard or HOC for protected routes, getServerSideProps too
- where to go next doc: markdown editor with image inline and upload, comments, likes, follow, tags, categories
- extract clear types in a single place, form, request, response, api - models, organize, consistent naming
- maybe arrays in navbar for mobile
- declerative navbar lesson
- tests
- drafts count in me
- all in daisy ui
- @tailwindcss/line-clamp plugin to limmit posts length
- custom font maybe
- footer styling
- login neutral button color, dark theme
- active button border, focus ring...
- Next images
- wrong password server response on login page
- client error handling, axios interceptor, alert component
- throw errors in all api
- remove safeParse(query), let it throw
- custom favicon, seo meta tags
- resize images on server, lovell/sharp
- mount only pg-data and remove prisma files from traefik repo
- skeletons, just in docs
- remove password from all server users
- maybe shell script for migration container
- postgres expose external env var in d-c.yml
- new next.js dockerfile? https://nextjs.org/docs/advanced-features/output-file-tracing
- add role attributes for accesibility in one go, a11...
- update resume react testing
- find practical github repo code example for jest and cypress
- setup Github Actions for tests
- check additional Eslint rules from other repositories
- setup Cypress
- separate test config for react and backend api
- mocks, spyes, describe
- unit, integration
- skeletons, react suspense
- work organisation md doc
- handle success, loading, error, empty states
- ErrorBoundary, Suspense loading
- tests: render 200 and 500, mutation, component - unit, forms, hooks, API backend, cypress with real db
- Github Action CI for tests
- handle http error in HomeView, both getServerSideProps and useQuery, ErrorBoundary, error handling and error testing same thing
- return ClientUser from all api endpoints
- update callback url on Facebook and Google for Oracle
- test coverage setup
- hooks error tests (and handling)
- migrate react query to v4, react 18
- test form, node api, cypress, ci, error 500
- each form should be separate component, easier to test
- parse FormData for test
- one youtube lesson for english
- seed redirect Home, signOut() redirects, needs localStorage, probably not
- gitpod env
- container with vs code for replicating bugs - Gitpod Self-Hosted container
- testing-lib/react-hooks ReactDom warning
- avatar thrown out of the form state??? form.reset() not working...
- zod.safeParse.error type
- \_error.tsx, Custom500.tsx pages?
- cv testing, react query, next, react, tailwind, architectures, databases, devcontainers, traefik, homelab
- empty state, home, profile... data.items: []
- fix tests after MeContext
- hide login blink
- maybe install `react-use` package
- fix dropdown outside click
- hooks tests renderHook from rtl instead of rtl/react-hooks
- fix types `yarn type-check`, Navbar ReactNode, ReactElement, JSX.Element []
- tomorrow:
  - types, models folder
  - react query error handling, axios interceptor, 4 states
  - types in api

### Questions

- error path, db function, getServerSideProps, api endpoint, ask reddit, github
- where to place and call printLoadedEnvVariables() ?
- absolute positioning or negative margin, css reddit question
- jest.mock() vs jest.spyOn()?
- exports from index.ts
- ReactElement vs JSX.Element vs ReactNode, ask this
- types for reusing Login and Register form

## Done

- admin role - done, maybe type admin | user in prisma
- middleware folder, withProtect, withRoles - done
- disable prisma seed before migrate - done
- error handling, next-connect - almost done
- rethink routes, extract - done
- fix User type - done
- migrate to axios, fetch has no progress, done
- add types file, mostly done
- fix routing from Post, done
- vs code recommended extensions, done
- install icons, done
- navbar, done
  - responsive, hamburger
  - avatar dropdown
- update next and everything else, done
- faker content, reseed, clean files, done
- settings form header dropzone, repeat password, done
- style forms, hero img upload, done
- icons in navbar items, done
- global styles button, links..., done
- footer, done
- problem: seed is buggy? solution: prisma 3 has bug with Promise.all([...]), use await, await, await..., done
- traefik container reverse proxy, done
- fix remaining forms, done
- sqlite to postgres, done
- dev, prod remove express https, done
- docker, done
- validation server, client, example [with-joi](https://github.com/vercel/next.js/tree/canary/examples/with-joi), [next-joi](https://github.com/codecoolture/next-joi), done with zod
- extract styles, tailwind, next examples, done
- query key in getServerSidePropa and useQuery and type it, done
- mutations, done
- progressbar tailwind div, done
- edit post, done
- create docs folder with mds, done
- fix theme reset on mobile menu, done
- route guards - redirect from getServerSideProps, done
- search fetching... indicator, done
- link to home on login page, done
- router.back() on cancel, done, styling href link,active...
- outside click close mobile menu, done
- mobile text wrap user, username, time, fix with flexbox, done
- responsive pagination and search, done
- dark theme, red, green, theme colors, daisy ui, done
- fix tailwind utility classes error, done
- users page, pagination, api filtering, done
- pagination with prisma and react query, done
- add search posts field, done
- full text search posts, done
- fix 1px border-bottom navbar calculation, done
- white border on pagination transparent button css bug, done
- alert component, done
- leave just id and email in session.user, and type, done
- refetch session after user is edited, done
- redirect on protected pages, logged in and admin cases - reusable guards, getMe() + if is enough
- protected routes and 404 pages, handled in getServerSideProps
- handle fb, google and local avatars, handled with isUrl()
- more color themes and navbar gradient, done
- 404 and 500 pages, done
- search and pagination responsive css, done
- \_document.tsx, CustomHead, seo, done
- publish/unpublish checkbox in update, no
- replace session.user on server, done
- group pagination items function, no
- soft delete for reseed, or logger, no
- msw not called at all?, done
- maybe put uploads paths in Routes object, done
- seed link in footer, done
- fix loading... escape . regex `await waitForElementToBeRemoved(() => screen.getByText(/loading\.\.\./i));`, done
- test Settings view, done
- userEvent Auth and Home, done
- AuthView all await userEvent wrapped in act(), why?, done
- delete 4. user on new page, force prerender, change page - current page state in component `data.pagination.total page useEffect calc` in Profile and Users, done useDecrementPage
- on delete user cascade posts not working, posts remain, done
- setup logged in user in test-utils render, done
- msw, done
- msw param routes, done
- reseed app button in footer, done
- user context and provider, done
- fix Settings password Zod, solution: Zod is fine, prevent Firefox from prepopulating saved password `<input autoComplete="new-password" />`, done
- implement Spinner loader, done
- remove padding top from PageLayout, recalculate min-height for content h-100%, done
- zod validate ids, done
- remove padding on profile sm, layout no horizontal padding prop, done
- me in QueryCache in getServerSideProps, no, should be client side if updated on client, just whole screen loader, wont do
- fix me refetch after login, done
- throw from all api's zod..., ZodError to ApiError convert fn, done
